FROM python:3.11-slim

WORKDIR /app

# Install dependencies
RUN pip install --no-cache-dir fastapi uvicorn pydantic python-multipart

# Copy secure API
COPY vertex_ai/secure_api.py ./

# Set environment variables
ENV API_SECRET_KEY=${API_SECRET_KEY:-th-ai-talent-wow-secret-2024}

# Expose port
EXPOSE 8080

# Run the secure API
CMD ["python", "secure_api.py"]